<% if content.new_record? %>
    <h1 class="g-light_gray">You are creating a new ‹‹<%= content.class.to_s.downcase %>››</h1>
<% else %>
    <h1 class="g-light_gray">You are editing a ‹‹<%= content.class.to_s.downcase %>›› #<%= content.id %></h1>
<% end %>

<% form_for [:posts, content], :html => {:class => "b-form"} do |form| %>
    <div class="b-form__item">
      <%= form.error_messages :id => "error_explanation",
                              :class => "b-form_errors g-light_gray",
                              :header_message => "Oupss...",
                              :message => "Your #{content.class.to_s.downcase} cannot be saved"
      %>
    </div>
    <% form.fields_for :post, content.post do |p| %>
        <%= p.hidden_field :content_type %>
        <div class="b-form__item">
          <%= p.label :category_id, "Choose category in which you want to write:", :class => "b-form__label g-inline" %>
          <%= p.select :category_id, options_for_select(@selectable_categories) %>
        </div>
        <div class="b-form__item">
          <%= p.label :title, "Title:", :class => "b-form__label" %>
          <%= p.text_field :title, :class => "b-form__input-text b-form__input-text_bigger" %>
        </div>
    <% end %>

    <%= render :partial => "posts/#{content.class.to_s.downcase.pluralize}/form", :locals => {:form => form, :content => content} %>

    <% form.fields_for :post, content.post do |p| %>
        <div class="b-form__item">
          <%= p.label :tag_list, "Tag list:", :class => "b-form__label" %>
          <%= p.text_field :tag_list, :class => "b-form__input-text b-form__input-text_bigger" %>
          <small class="b-form__item_legend">You should divide tags with comma. For example
            <span class="b-form__item_legend__example">"ruby on rails, programming, russia"</span>.
          </small>
        </div>
    <% end %>

    <div class="b-form__item">
      <%= form.submit "#{form.object.new_record? ? 'Add' : 'Update'}", :class => "b-form__input-submit" %>
      or <%= link_to "cancel", root_path %>
    </div>
<% end %>


